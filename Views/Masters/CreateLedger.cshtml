@{
    ViewBag.Title = "Ledgers";
    ViewBag.pTitle = "Ledger Management";
    ViewBag.pageTitle = "Ledgers";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- start page title -->
<div class="row">
    <div class="col-12">
        <div class="page-title-box d-sm-flex align-items-center justify-content-between">
            <h4 class="mb-sm-0">@ViewBag.ptitle</h4>

            <div class="page-title-right">
                <ol class="breadcrumb m-0">
                    <li class="breadcrumb-item"><a href="javascript: void(0);">@ViewBag.pagetitle</a></li>
                    <li class="breadcrumb-item active">@ViewBag.ptitle</li>
                </ol>
            </div>

        </div>
    </div>
</div>
<!-- end page title -->
<div class="row">
    <div class="col-lg-8">

        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Basic Details</h5>
            </div>
            <!-- end card header -->
            <div class="card-body">
                <div class="tab-content">
                    <div class="tab-pane active" id="addledger-general-info" role="tabpanel">
                        <div class="row">
                            <div class="col-lg-3">
                                <div class="mb-3">
                                    <label class="form-label" for="AccountCodeinput">Account Code</label>
                                    <input type="text" class="form-control" disabled id="AccountCodeinput" placeholder="Enter Account Code">
                                </div>
                            </div>
                            <div class="col-lg-5">
                                <div class="mb-3">
                                    <label class="form-label" for="AccountNameinput">Account Name</label>
                                    <input type="text" class="form-control" id="AccountNameinput" placeholder="Enter Account Name">
                                </div>
                            </div> 
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label" for="AccountTypeinput">Account Type</label>
                                    <select class="form-select" id="AccountTypeinput" data-choices data-choices-search-true>
                                        <option value="" selected>Select</option>
                                        <option value="Sundry Creditors">Sundry Creditors</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label" for="Currencyinput">Currency</label>
                                    <select class="form-select" id="Currencyinput" data-choices data-choices-search-true>
                                        <option value="" selected>Select</option>
                                        <option value="SAR">SAR</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label" for="Allowcostcentreinput">Alow Cost Centre?</label>
                                    <select class="form-select" id="Allowcostcentreinput" data-choices data-choices-search-true>
                                        <option value="" selected>Select</option>
                                        <option value="YES">YES</option>
                                        <option value="NO">NO</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-2">
                                <div class="mb-3">
                                    <div class="form-check notification-check">
                                        <input class="form-check-input" type="checkbox" value="" id="EnablechequePrint-check01">
                                        <label class="form-check-label" for="EnablechequePrint-check01">Enable Cheque Printing?</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-2">
                                <div class="mb-3">
                                    <div class="form-check notification-check">
                                        <input class="form-check-input" type="checkbox" value="" id="IsVATReturns-check01">
                                        <label class="form-check-label" for="IsVATReturns-check01">Is VAT Returns?</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label" for="AccountNumberinput">Account Number</label>
                                    <input type="text" class="form-control" id="AccountNumberinput" placeholder="Enter Account Number">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label for="monthlybudgetInput" class="form-label">Monthly Budget</label>
                                    <input type="number" id="monthlybudgetInput" class="form-control">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <div class="form-check notification-check">
                                        <input class="form-check-input" type="checkbox" value="" id="Iscomposition-check01">
                                        <label class="form-check-label" for="Iscomposition-check01">Is Composition?</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label" for="Tininput">TIN</label>
                                    <input type="text" class="form-control" id="Tininput" placeholder="Enter TIN">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label" for="VatNumberinput">VAT No.</label>
                                    <input type="text" class="form-control" id="VatNumberinput" placeholder="Enter VAT">
                                </div>
                            </div>
                            
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label" for="Aadharnumberinput">Aadhar Card No.</label>
                                    <input type="text" class="form-control" id="Aadharnumberinput" placeholder="Enter Aadhar No.">
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="mb-3">
                                    <label class="form-label" for="Addressinput">Address Details</label>
                                    <input type="text" class="form-control" id="Addressinput">
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="mb-3">
                                    <label class="form-label" for="addressline2input">Address Line2</label>
                                    <input type="text" class="form-control" id="addressline2input">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label" for="addressline3input">Address Line3</label>
                                    <input type="text" class="form-control" id="addressline3input">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label" for="Locationinput">Location</label>
                                    <input type="text" class="form-control" id="Locationinput" placeholder="Enter Location">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label" for="Stateinput">State & Code </label>
                                    <select class="form-select" id="Stateinput" data-choices data-choices-search-true>
                                        <option value="" selected>Select</option>
                                        <option value="01-Jammu & Kasmir">01-Jammu & Kasmir</option>
                                        <option value="02-Himachal Pradesh">02-Himachal Pradesh</option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label" for="Countryinput">Country</label>
                                    <select class="form-select" id="Countryinput" data-choices data-choices-search-false>
                                        <option value="" selected>Select</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label" for="Postalcodeinput">Postal Code</label>
                                    <input type="text" class="form-control" id="Postalcodeinput" placeholder="Enter postal Code">
                                </div>
                            </div>

                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label" for="Telnumberinput">Telephone No.</label>
                                    <input type="text" class="form-control" id="Telnumberinput" placeholder="Enter Tel No.">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label" for="Faxnumberinput">Fax No.</label>
                                    <input type="text" class="form-control" id="Faxnumberinput" placeholder="Enter Fax No.">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label" for="Emailidinput">Email ID </label>
                                    <input type="text" class="form-control" id="Emailidinput" placeholder="Enter Email id ">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label" for="Websiteinput">Website</label>
                                    <input type="text" class="form-control" id="Websiteinput" placeholder="Enter Website">
                                </div>
                            </div>

                        </div>
                        <!-- end row -->
                    </div>
                    <!-- end tab-pane -->
                    <!-- end tab pane -->
                </div>
                <!-- end tab content -->
            </div>
            <!-- end card body -->
        </div>


        <!-- end card -->
        <div class="text-end mb-3">
            <div class="hstack gap-2 justify-content-end">
                <input type="text" id="hdnIDInput" hidden />
                <button type="submit" id="btnUpdate" class="btn btn-success w-sm" onclick="fnOnupdateSupplier()" fdprocessedid="vivlg9">Update</button>
                <button type="submit" id="btnSave" class="btn btn-success w-sm" onclick="fnOnsaveSupplier()" fdprocessedid="vivlg9">Submit</button>
                <button type="button" class="btn btn-soft-success" onclick="fnOnCancelSupplier()" fdprocessedid="06yrki5">Cancel</button>
                <a href="/Masters/Suppliers" class="btn btn-soft-primary" id="addproduct-btn"> Back To Listing Page</a>
            </div>

        </div>
    </div>
    <!-- end col -->

    <div class="col-lg-4">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Photo Details</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="text-center">
                        <div class="profile-user position-relative d-inline-block mx-auto  mb-2">
                            <img src="/Admin/dist/material/assets/images/users/user-dummy-img.jpg" style="height: 8.5rem !important;width: 7.5rem;" class=" avatar-xl img-thumbnail user-profile-image  shadow" alt="user-profile-image">
                            <div class="avatar-xs p-0  profile-photo-edit">
                                <input id="profile-img-file-input" type="file" class="profile-img-file-input">
                                <label for="profile-img-file-input" class="profile-photo-edit avatar-xs">
                                    <span class="avatar-title bg-light text-body shadow">
                                        <i class="ri-camera-fill"></i>
                                    </span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-12">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="mb-3">
                                    <label for="creditlimitInput" class="form-label">Credit Limit</label>
                                    <input type="number" id="creditlimitInput" class="form-control">
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="mb-3">
                                    <label for="paytermsInput" class="form-label">Payment Terms (In days)</label>
                                    <input type="number" id="paytermsInput" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="mb-3">
                                    <label for="DefaultdiscountInput" class="form-label">Default discount</label>
                                    <input type="number" id="DefaultdiscountInput" class="form-control">
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="mb-3">
                                    <label for="Pricelevelinput" class="form-label">Price Level</label>
                                    <select class="form-select" id="Pricelevelinput" data-choices data-choices-search-true>
                                        <option value="" selected>Select</option>
                                        <option value="Wholesale">Wholesale</option>
                                        <option value="Retail">Retail</option>
                                        <option value="Custom">Custom</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <!-- end card body -->
        </div>
        <!-- end card -->


        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Additional Contact Details</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="mb-3">
                            <label class="form-label" for="Contactpersoninput">Contact Person Name</label>
                            <input type="text" class="form-control" id="ContactpersonNameinput" placeholder="EnterName">
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="mb-3">
                            <label class="form-label" for="Designationinput">Designation</label>
                            <input type="text" class="form-control" id="Designationinput" placeholder="Enter Designation">
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="mb-3">
                            <label class="form-label" for="ConperTelnumberinput">Tel</label>
                            <input type="text" class="form-control" id="ConperTelnumberinput" placeholder="Enter Tel No. ">
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="mb-3">
                            <label class="form-label" for="MobileNoinput">Mobile No</label>
                            <input type="text" class="form-control" id="MobileNoinput" placeholder="Enter Mobile No. ">
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <div class="mb-3">
                            <label class="form-label" for="ConperEmailIdinput">Email ID</label>
                            <input type="text" class="form-control" id="ConperEmailIdinput" placeholder="Enter Email ID ">
                        </div>
                    </div>
                </div>
                <!-- end row -->
            </div>
            <!-- end card body -->
        </div>
        <!-- end card -->


    </div>
    <!-- end col -->
</div>
<!-- end row -->
@section scripts{


    <script>
        var LogoFileName = "";

        $(document).ready(function () {

            var AccId = @ViewBag.AccId;
            var IsEdit = @ViewBag.IsEdit;

            $("#hdnIDInput").val(AccId);

            // Get file input element
            let fileInput = document.getElementById('profile-img-file-input');
            fileInput.addEventListener('change', function (event) {
                // Get file name
                let fileName = fileInput.files[0].name;
                LogoFileName = fileName;
            });
            if (IsEdit) {
                fnEditSupplier(AccId);
                $("#btnUpdate").show();
                $("#btnSave").hide();
            }
            else {
                $("#AccountCodeinput").val("SUP" + AccId);
                $("#btnUpdate").hide();
                $("#btnSave").show();
            }

        });

        function fnOnsaveSupplier() {

            var supplier = {
                AccountCode: $("#AccountCodeinput").val(),
                AccountName: $("#AccountNameinput").val(),
                AccountType: $("#AccountTypeinput").val(), 
                Currency: $("#Currencyinput").val(),
                Allowcostcentre: $("#Allowcostcentreinput").val(),
                EnablechequePrint: document.getElementById("EnablechequePrint-check01").checked,
                IsVATReturns: document.getElementById("IsVATReturns-check01").checked,
                AccountNumber : $("#AccountNumberInput").val(),
                monthlybudget: $("#monthlybudgetInput").val(),
                Tin: $("#Tininput").val(),
                VatNumber: $("#VatNumberinput").val(),
                Iscomposition: document.getElementById("Iscomposition-check01").checked,
                Aadharnumber: $("#Aadharnumberinput").val(),
                Address: $("#Addressinput").val(),
                Addressline2: $("#addressline2input").val(),
                Addressline3: $("#addressline3input").val(),
                Location: $("#Locationinput").val(),
                State: $("#Stateinput").val(),
                Country: $("#Countryinput").val(),
                Postalcode: $("#Postalcodeinput").val(),
                Telnumber: $("#Telnumberinput").val(),
                Faxnumber: $("#Faxnumberinput").val(),
                Emailid: $("#Emailidinput").val(),
                Website: $("#Websiteinput").val(),

                UploadImageName: LogoFileName,
                creditlimit: $("#creditlimitInput").val(),
                payterms: $("#paytermsInput").val(),
                Defaultdiscount: $("#DefaultdiscountInput").val(),
                Pricelevel: $("#Pricelevelinput").val(),
                
                ContactpersonName: $("#ContactpersonNameinput").val(),
                Designation: $("#Designationinput").val(),
                ConperTelnumber: $("#ConperTelnumberinput").val(),
                MobileNo: $("#MobileNoinput").val(),
                ConperEmailId: $("#ConperEmailIdinput").val()
            }

            $.ajax({
                url: "/api/SupplierApi",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify(supplier),
                beforeSend: function () {
                    // $('#divAlert').show();
                },
                //success: function (data, jqXHR) {
                success: function (data) {

                    if (data.status) {
                        Swal.fire(
                            {
                                title: 'Suppliers',
                                text: data.message,
                                icon: 'success',
                                showCancelButton: true,
                                confirmButtonClass: 'btn btn-primary w-xs me-2 mt-2',
                                cancelButtonClass: 'btn btn-danger w-xs mt-2',
                                buttonsStyling: false,
                                showCloseButton: true
                            }
                        )
                        // setTimeout(location.reload(true), 10000);
                    }
                    else {
                        Swal.fire(
                            {
                                title: 'Customer Creation',
                                text: data.message,
                                icon: 'warning',
                                showCancelButton: true,
                                confirmButtonClass: 'btn btn-primary w-xs me-2 mt-2',
                                cancelButtonClass: 'btn btn-danger w-xs mt-2',
                                buttonsStyling: false,
                                showCloseButton: true
                            }
                        )
                    }

                },
                complete: function () {

                    // $('#divAlert').hide();
                    // $('#SampleModal').modal('hide');
                    // location.reload(true)
                },
                error: function (e) {
                    console.log(e.responseText);
                }
            });


            // }

        }

        function fnEditSupplier(Id) {
            // $("#hdnIDInput").val(Id);
            $.ajax({
                url: '/api/SupplierApi/' + Id,
                type: "GET",
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    //$('#divLoader').show();
                },
                success: function (data) {

                    console.log(data);
                    $("#AccountCodeinput").val(data.accountCode);
                    $("#AccountNameinput").val(data.accountName);
                    $("#AccountTypeinput").val(data.accountType);
                    $("#Currencyinput").val(data.currency);
                    $("#Allowcostcentreinput").val(data.allowcostcentre);
                    //document.getElementById("EnablechequePrint-check01").checked,
                    //document.getElementById("IsVATReturns-check01").checked,
                    $("#AccountNumberInput").val(data.accountNumber);
                    $("#monthlybudgetInput").val(data.monthlybudget);
                    $("#Tininput").val(data.tin);
                    $("#VatNumberinput").val(data.vatNumber);
                    //document.getElementById("Iscomposition-check01").checked,
                    $("#Aadharnumberinput").val(data.aadharnumber);
                    $("#Addressinput").val(data.address);
                    $("#addressline2input").val(data.addressline2);
                    $("#addressline3input").val(data.addressline3);
                    $("#Locationinput").val(data.location);
                    $("#Stateinput").val(data.state);
                    $("#Countryinput").val(data.country);
                    $("#Postalcodeinput").val(data.postalcode);
                    $("#Telnumberinput").val(data.telnumber);
                    $("#Faxnumberinput").val(data.faxnumber);
                    $("#Emailidinput").val(data.emailid);
                    $("#Websiteinput").val(data.website);

                    // UploadImageName: LogoFileName,
                    $("#creditlimitInput").val(data.creditlimit);
                    $("#paytermsInput").val(data.payterms);
                    $("#DefaultdiscountInput").val(data.defaultdiscount);
                    $("#Pricelevelinput").val(data.pricelevel);

                    $("#ContactpersonNameinput").val(data.contactpersonName);
                    $("#Designationinput").val(data.designation);
                    $("#ConperTelnumberinput").val(data.conperTelnumber);
                    $("#MobileNoinput").val(data.mobileNo);
                    $("#ConperEmailIdinput").val(data.conperEmailId);

                },
                complete: function (e) {
                },
                error: function (e) {
                    //$('body').removeClass('modal-open');
                    //$('.modal-backdrop').remove();
                    console.log(e.responseText);
                }
            });


        }

        function fnOnupdateSupplier() {

            var supplier = {
                Id: $("#hdnIDInput").val(),
                AccountCode: $("#AccountCodeinput").val(),
                AccountName: $("#AccountNameinput").val(),
                AccountType: $("#AccountTypeinput").val(),
                Currency: $("#Currencyinput").val(),
                Allowcostcentre: $("#Allowcostcentreinput").val(),
                EnablechequePrint: document.getElementById("EnablechequePrint-check01").checked,
                IsVATReturns: document.getElementById("IsVATReturns-check01").checked,
                AccountNumber: $("#AccountNumberInput").val(),
                monthlybudget: $("#monthlybudgetInput").val(),
                Tin: $("#Tininput").val(),
                VatNumber: $("#VatNumberinput").val(),
                Iscomposition: document.getElementById("Iscomposition-check01").checked,
                Aadharnumber: $("#Aadharnumberinput").val(),
                Address: $("#Addressinput").val(),
                Addressline2: $("#addressline2input").val(),
                Addressline3: $("#addressline3input").val(),
                Location: $("#Locationinput").val(),
                State: $("#Stateinput").val(),
                Country: $("#Countryinput").val(),
                Postalcode: $("#Postalcodeinput").val(),
                Telnumber: $("#Telnumberinput").val(),
                Faxnumber: $("#Faxnumberinput").val(),
                Emailid: $("#Emailidinput").val(),
                Website: $("#Websiteinput").val(),

                UploadImageName: LogoFileName,
                creditlimit: $("#creditlimitInput").val(),
                payterms: $("#paytermsInput").val(),
                Defaultdiscount: $("#DefaultdiscountInput").val(),
                Pricelevel: $("#Pricelevelinput").val(), 

                ContactpersonName: $("#ContactpersonNameinput").val(),
                Designation: $("#Designationinput").val(),
                ConperTelnumber: $("#ConperTelnumberinput").val(),
                MobileNo: $("#MobileNoinput").val(),
                ConperEmailId: $("#ConperEmailIdinput").val()
            }
            $.ajax({
                url: "/api/SupplierApi",
                type: "PUT",
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify(supplier),
                beforeSend: function () {
                    // $('#divAlert').show();
                },
                //success: function (data, jqXHR) {
                success: function (data) {

                    if (data.status) {
                        Swal.fire(
                            {
                                title: 'Suppliers',
                                text: data.message,
                                icon: 'success',
                                showCancelButton: true,
                                confirmButtonClass: 'btn btn-primary w-xs me-2 mt-2',
                                cancelButtonClass: 'btn btn-danger w-xs mt-2',
                                buttonsStyling: false,
                                showCloseButton: true
                            }
                        )
                        // $('#addGroup').modal('hide');
                        // $('#edit-btn').hide();
                        // $('#add-btn').show();
                        // $('#exampleModalLabel').text("Create Account Group");

                        // $("#GroupnameInput").val("");
                        // $("#GrouptypeInput").val("");
                        // $("#iddivundergroup").hide();
                        // $("#UndergroupInput").val("");
                    }
                    else {
                        Swal.fire(
                            {
                                title: 'Suppliers',
                                text: data.message,
                                icon: 'warning',
                                showCancelButton: true,
                                confirmButtonClass: 'btn btn-primary w-xs me-2 mt-2',
                                cancelButtonClass: 'btn btn-danger w-xs mt-2',
                                buttonsStyling: false,
                                showCloseButton: true
                            }
                        )
                    }

                },
                complete: function () {
                    // $('#divAlert').hide();
                    // $('#SampleModal').modal('hide');
                    // location.reload(true)
                },
                error: function (e) {
                    $('.error').show();
                }
            });
        }

        function fnOnCancelSupplier() {
            location.href = '/Masters/Suppliers';
        }
    </script>



}